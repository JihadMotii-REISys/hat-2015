machine:
    services:
        - docker
    node:
        version: v4.2.1

dependencies:
    cache_directories:
        - ./src/frontend/node_modules
        - ./src/frontend/bower_components
    override:
        - sudo pip install --upgrade docker-compose==1.5.0
        - npm install -g bower
        - npm install -g karma
        - cd ./src/frontend && npm install && bower install

test:
    override:
        - pwd
        - ls -lsa
        - node -v
        - npm -v
        - bower -v
        - cd ./src/frontend && grunt karma:unit --verbose --debug
        - sh ./scripts/docker/run-tests.sh
#        - docker-compose run -d --no-deps frontend
#        - cd app; mocha

#deployment:
#  hub:
#    branch: master
#    commands:
#      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
#      - docker build -t jmotii/frontend ./src/frontend
#      - docker push jmotii/frontend
#      - docker build -t jmotii/backend ./src/backend
#      - docker push jmotii/frontend